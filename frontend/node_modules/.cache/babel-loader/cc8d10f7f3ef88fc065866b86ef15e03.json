{"ast":null,"code":"/**\n * SVG World Map JS Time Controls\n * \n * Package: SVG World Map JS\n * URL: https://github.com/raphaellepuschitz/SVG-World-Map\n **/\n// Main function\nexport function svgWorldMapTimeControls(svgWorldMap, timePause, timeLoop, initTimeData) {\n  // Global variables\n  var timer; // Interval\n\n  var date = 0; // date = current day, month, year etc.\n\n  var ticks = 0; // For speed\n\n  var speed = 10; // For ticks per date\n\n  var timeData = false;\n  var maxDates = false;\n  var loop = false;\n  var paused = true; // Check time dataset\n\n  if (initTimeData != undefined) {\n    timeData = initTimeData; // Convert time date from object to array\n\n    if (typeof timeData == 'object' && Array.isArray(timeData) == false) {\n      var timeHelper = [];\n      var keys = Object.keys(timeData);\n\n      for (var k = 0; k < keys.length; k++) {\n        timeHelper.push({\n          [keys[k]]: timeData[keys[k]]\n        });\n      }\n\n      timeData = timeHelper;\n    }\n\n    maxDates = timeData.length - 1;\n  } // Set pause at start (= autoplay)\n\n\n  if (timePause == false) {\n    paused = false;\n  } // Set loop\n\n\n  if (timeLoop == true) {\n    loop = true;\n  } // Dynamically load webfont\n\n\n  document.getElementsByTagName('head')[0].insertAdjacentHTML('beforeend', '<link rel=\"stylesheet\" href=\"../src/font/flaticon.css\" />'); // Start HTML injection\n\n  initControls(); // Interval for day timer\n\n  function initDayTimer() {\n    timer = window.setInterval(function () {\n      if (!paused) {\n        increaseTimeTicks();\n      }\n    }, 100);\n  } // 'Tick'-logic for time per speed\n\n\n  function increaseTimeTicks() {\n    ticks++;\n\n    if (speed == 1 || ticks % speed == 1) {\n      if (date < maxDates || maxDates == false) {\n        date++;\n      } else {\n        if (loop) {\n          date = 0; // Return to start if loop is on\n        } else {\n          paused = true; // Pause if last date of data is reached\n        }\n      }\n\n      updateControls();\n    }\n  } // Slider control\n\n\n  function initSilder() {\n    if (timeData != false) {\n      document.getElementById(\"map-slider\").oninput = function () {\n        paused = true;\n        date = this.value;\n        updateControls();\n      };\n    } else {\n      document.getElementById(\"map-slider\").style.display = 'none';\n      document.getElementById(\"map-slider-container\").style.display = 'list-item';\n      document.getElementById(\"map-slider-container\").style.fontSize = '0';\n    }\n  } // Keyboard controls and start values\n\n\n  function initKeyControls() {\n    // Keyboard controls\n    document.addEventListener('keyup', function (event) {\n      if (event.keyCode == 32) {\n        // Space\n        document.getElementById(\"map-control-play-pause\").firstChild.click();\n      } else if (event.keyCode == 37) {\n        // Arrow left\n        document.getElementById(\"map-control-back\").firstChild.click();\n      } else if (event.keyCode == 38) {\n        // Arrow up\n        document.getElementById(\"map-control-start\").firstChild.click();\n      } else if (event.keyCode == 39) {\n        // Arrow right\n        document.getElementById(\"map-control-forward\").firstChild.click();\n      } else if (event.keyCode == 40) {\n        // Arrow down\n        document.getElementById(\"map-control-end\").firstChild.click();\n      } else if (event.keyCode == 171) {\n        // Arrow right\n        document.getElementById(\"map-control-faster\").firstChild.click();\n      } else if (event.keyCode == 173) {\n        // Arrow down\n        document.getElementById(\"map-control-slower\").firstChild.click();\n      }\n    });\n  } // Update controls output\n\n\n  function updateControls() {\n    if (paused) {\n      document.getElementById(\"map-control-play-pause\").innerHTML = '<i class=\"flaticon-play\"></i>';\n    } else {\n      document.getElementById(\"map-control-play-pause\").innerHTML = '<i class=\"flaticon-pause\"></i>';\n    }\n\n    if (timeData) {\n      var dateKey = Object.keys(timeData[date])[0]; // Get date by first key\n\n      document.getElementById(\"map-slider\").value = date;\n      document.getElementById(\"map-date\").innerHTML = dateKey;\n      svgWorldMap.update(timeData[date][dateKey]); // Call update function in SVG World Map lib \n    } else {\n      document.getElementById(\"map-date\").innerHTML = date;\n    }\n\n    svgWorldMap.date(date); // Call date and then callback function in SVG World Map lib \n  } // Play and pause controls\n\n\n  window.clickPlayPause = function () {\n    paused = !paused;\n    updateControls();\n  }; // Controls for play, pause, forward, back, start, end\n\n\n  window.clickControl = function () {\n    var controlid = event.srcElement.parentNode.id;\n\n    if (controlid == 'map-control-start') {\n      date = 0;\n    } else if (controlid == 'map-control-end') {\n      date = maxDates;\n    } else if (controlid == 'map-control-back' && date > 0) {\n      date--;\n    } else if (controlid == 'map-control-forward' && date < maxDates) {\n      date++;\n    }\n\n    paused = true;\n    updateControls();\n  }; // Speed controls\n\n\n  window.clickSpeed = function () {\n    var speedid = event.srcElement.parentNode.id;\n\n    if (speedid == 'map-control-faster' && speed > 1) {\n      speed--;\n    } else if (speedid == 'map-control-slower' && speed < 20) {\n      speed++;\n    }\n  }; // HTML for controls\n\n\n  function initControls() {\n    // Avoid double loading\n    if (document.getElementById('map-controls') == null) {\n      // Init CSS\n      initControlsCSS(); // Control elements\n\n      var controlElements = {\n        'map-controls': {\n          tag: 'div',\n          append: 'svg-world-map-container'\n        },\n        'map-control-buttons': {\n          tag: 'div',\n          append: 'map-controls'\n        },\n        'map-control-start': {\n          tag: 'button',\n          append: 'map-control-buttons',\n          icon: 'previous',\n          click: 'clickControl()'\n        },\n        'map-control-back': {\n          tag: 'button',\n          append: 'map-control-buttons',\n          icon: 'rewind',\n          click: 'clickControl()'\n        },\n        'map-control-play-pause': {\n          tag: 'button',\n          append: 'map-control-buttons',\n          icon: 'play',\n          click: 'clickPlayPause()'\n        },\n        'map-control-forward': {\n          tag: 'button',\n          append: 'map-control-buttons',\n          icon: 'fast-forward',\n          click: 'clickControl()'\n        },\n        'map-control-end': {\n          tag: 'button',\n          append: 'map-control-buttons',\n          icon: 'skip',\n          click: 'clickControl()'\n        },\n        'map-slider-container': {\n          tag: 'div',\n          append: 'map-controls'\n        },\n        'map-slider': {\n          tag: 'input',\n          append: 'map-slider-container'\n        },\n        'map-speed-controls': {\n          tag: 'div',\n          append: 'map-controls'\n        },\n        'map-control-slower': {\n          tag: 'button',\n          append: 'map-speed-controls',\n          icon: 'minus',\n          click: 'clickSpeed()'\n        },\n        'map-control-faster': {\n          tag: 'button',\n          append: 'map-speed-controls',\n          icon: 'plus',\n          click: 'clickSpeed()'\n        },\n        'map-date': {\n          tag: 'div',\n          append: 'map-controls'\n        }\n      }; // Create all elements dynamically\n\n      for (var element in controlElements) {\n        window[element] = document.createElement(controlElements[element].tag);\n        window[element].setAttribute(\"id\", element);\n        window[controlElements[element].append].appendChild(window[element]);\n\n        if (controlElements[element].tag == 'button') {\n          var i = document.createElement('i');\n          i.setAttribute(\"class\", \"flaticon-\" + controlElements[element].icon);\n          window[element].appendChild(i);\n          window[element].setAttribute(\"onclick\", controlElements[element].click);\n        }\n      } // Add missing attributes to slider\n\n\n      document.getElementById(\"map-slider\").setAttribute(\"type\", \"range\");\n      document.getElementById(\"map-slider\").setAttribute(\"min\", \"0\");\n      document.getElementById(\"map-slider\").setAttribute(\"max\", maxDates); // Startup time control functions\n\n      initDayTimer();\n      initSilder();\n      initKeyControls();\n      updateControls();\n    }\n  } // CSS for controls\n\n\n  function initControlsCSS() {\n    var style = document.createElement('style');\n    style.innerHTML = `\n            #map-controls { position: absolute; bottom: 0; left: 0; right: 0; width: auto; height: 40px; padding: 0 10px; background-color: rgba(0, 0, 0, .75); }\n            #map-control-buttons, #map-slider-container, #map-speed-controls, #map-date { float: left; }\n            #map-control-buttons { width: 20%; }\n            #map-slider-container { width: 60%; }\n            #map-speed-controls, #map-date { width: 10%; text-align: right; }\n            #map-date { margin-top: 10px; color: #FFFFFF; }\n            #map-controls button { cursor: pointer; opacity: .5; margin-top: 10px; color: #FFFFFF; background-color: transparent; border: none; } /* broder: manu; */\n            #map-controls button:hover { opacity: 1 !important; }\n            #map-controls button i::before { margin: 0; }\n            #map-speed-controls button i::before { font-size: 15px; font-weight: bold; }\n            #map-slider { -webkit-appearance: none; width: 98%; height: 5px; border-radius: 5px; background: #8A8A8A; -moz-user-select: none; user-select: none; outline: none; margin: 17px 13px 0; }\n            #map-slider:focus { outline: none; }\n            #map-slider::-webkit-slider-thumb { -webkit-appearance: none; appearance: none; width: 15px; height: 15px; border-radius: 50%; background: #FFFFFF; cursor: pointer; opacity: .5; }\n            #map-slider::-moz-range-thumb { width: 15px; height: 15px; border-radius: 50%; background: #FFFFFF; cursor: pointer; opacity: .5; -moz-user-select: none; user-select: none; }\n            #map-slider:hover::-webkit-slider-thumb, #map-slider:hover::-moz-range-thumb { opacity: 1; }\n            @media all and (max-width: 999px) { \n                #map-control-buttons { width: 25%; }\n                #map-slider-container { width: 50%; }\n                #map-speed-controls, #map-date { width: 12.5%; }\n                #map-controls button { margin-top: 12px; } \n                #map-controls button i::before { font-size: 15px; } \n                #map-speed-controls button i::before { font-size: 12px; } \n            }\n            @media all and (max-width: 666px) { \n                #map-speed-controls { display: none; }\n                #map-control-buttons, #map-date { position: absolute; bottom: 41px; height: 30px; padding-top: 10px; text-align: center; background-color: rgba(0, 0, 0, .75); }\n                #map-control-buttons { left: 0; width: 50%; }\n                #map-date { right: 0; width: calc(50% - 1px); }\n                #map-controls button { margin-top: 0px; } \n                #map-slider-container { width: 100%; }\n                #map-slider { width: 100%; margin: 17px 0 0; }\n            }\n        `;\n    document.head.appendChild(style);\n  }\n}","map":{"version":3,"sources":["/Users/shashwatkansal/Documents/Projects/conquer2/V0.2/conquer2/frontend/src/pages/SVG-World-Map/src/svg-world-map-time-controls.mjs"],"names":["svgWorldMapTimeControls","svgWorldMap","timePause","timeLoop","initTimeData","timer","date","ticks","speed","timeData","maxDates","loop","paused","undefined","Array","isArray","timeHelper","keys","Object","k","length","push","document","getElementsByTagName","insertAdjacentHTML","initControls","initDayTimer","window","setInterval","increaseTimeTicks","updateControls","initSilder","getElementById","oninput","value","style","display","fontSize","initKeyControls","addEventListener","event","keyCode","firstChild","click","innerHTML","dateKey","update","clickPlayPause","clickControl","controlid","srcElement","parentNode","id","clickSpeed","speedid","initControlsCSS","controlElements","tag","append","icon","element","createElement","setAttribute","appendChild","i","head"],"mappings":"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","sourcesContent":["/**\n * SVG World Map JS Time Controls\n * \n * Package: SVG World Map JS\n * URL: https://github.com/raphaellepuschitz/SVG-World-Map\n **/\n\n// Main function\nexport function svgWorldMapTimeControls(svgWorldMap, timePause, timeLoop, initTimeData) { \n\n    // Global variables\n    var timer; // Interval\n    var date = 0; // date = current day, month, year etc.\n    var ticks = 0; // For speed\n    var speed = 10; // For ticks per date\n    var timeData = false;\n    var maxDates = false;\n    var loop = false;\n    var paused = true;\n\n    // Check time dataset\n    if (initTimeData != undefined) {\n        timeData = initTimeData;\n        // Convert time date from object to array\n        if (typeof(timeData) == 'object' && Array.isArray(timeData) == false) {\n            var timeHelper = [];\n            var keys = Object.keys(timeData);\n            for (var k=0; k<keys.length; k++) {\n                timeHelper.push({ [keys[k]]: timeData[keys[k]] });\n            }\n            timeData = timeHelper;\n        }\n        maxDates = timeData.length-1;\n    }\n\n    // Set pause at start (= autoplay)\n    if (timePause == false) {\n        paused = false;\n    }\n\n    // Set loop\n    if (timeLoop == true) {\n        loop = true;\n    }\n\n    // Dynamically load webfont\n    document.getElementsByTagName('head')[0].insertAdjacentHTML('beforeend', '<link rel=\"stylesheet\" href=\"../src/font/flaticon.css\" />');\n\n    // Start HTML injection\n    initControls();\n\n    // Interval for day timer\n    function initDayTimer() {\n        timer = window.setInterval(function() {\n            if (!paused) {\n                increaseTimeTicks();\n            }\n        }, 100);\n    }\n\n    // 'Tick'-logic for time per speed\n    function increaseTimeTicks() {\n        ticks++;\n        if (speed == 1 || (ticks % speed) == 1) {\n            if (date < maxDates || maxDates == false) {\n                date++;\n            } else {\n                if (loop) {\n                    date = 0; // Return to start if loop is on\n                } else {\n                    paused = true; // Pause if last date of data is reached\n                }\n            }\n            updateControls();\n        }\n    }\n\n    // Slider control\n    function initSilder() {\n        if (timeData != false) {\n            document.getElementById(\"map-slider\").oninput = function() {\n                paused = true;\n                date = this.value;\n                updateControls();\n            } \n        } else {\n            document.getElementById(\"map-slider\").style.display = 'none';\n            document.getElementById(\"map-slider-container\").style.display = 'list-item';\n            document.getElementById(\"map-slider-container\").style.fontSize = '0';\n        }\n    }\n\n    // Keyboard controls and start values\n    function initKeyControls() {\n        // Keyboard controls\n        document.addEventListener('keyup', function(event) {\n            if (event.keyCode == 32) { // Space\n                document.getElementById(\"map-control-play-pause\").firstChild.click();\n            } else if (event.keyCode == 37) { // Arrow left\n                document.getElementById(\"map-control-back\").firstChild.click();\n            } else if (event.keyCode == 38) { // Arrow up\n                document.getElementById(\"map-control-start\").firstChild.click();\n            } else if (event.keyCode == 39) { // Arrow right\n                document.getElementById(\"map-control-forward\").firstChild.click();\n            } else if (event.keyCode == 40) { // Arrow down\n                document.getElementById(\"map-control-end\").firstChild.click();\n            } else if (event.keyCode == 171) { // Arrow right\n                document.getElementById(\"map-control-faster\").firstChild.click();\n            } else if (event.keyCode == 173) { // Arrow down\n                document.getElementById(\"map-control-slower\").firstChild.click();\n            }\n        });\n    }\n\n    // Update controls output\n    function updateControls() {\n        if (paused) {\n            document.getElementById(\"map-control-play-pause\").innerHTML = '<i class=\"flaticon-play\"></i>';\n        } else {\n            document.getElementById(\"map-control-play-pause\").innerHTML = '<i class=\"flaticon-pause\"></i>';\n        }\n        if (timeData) {\n            var dateKey = Object.keys(timeData[date])[0]; // Get date by first key\n            document.getElementById(\"map-slider\").value = date;\n            document.getElementById(\"map-date\").innerHTML = dateKey;\n            svgWorldMap.update(timeData[date][dateKey]); // Call update function in SVG World Map lib \n        } else {\n            document.getElementById(\"map-date\").innerHTML = date;\n        }\n        svgWorldMap.date(date); // Call date and then callback function in SVG World Map lib \n    }\n\n    // Play and pause controls\n    window.clickPlayPause = function() {\n        paused = !paused;\n        updateControls();\n    }\n\n    // Controls for play, pause, forward, back, start, end\n    window.clickControl = function() {\n        var controlid = event.srcElement.parentNode.id; \n        if (controlid == 'map-control-start') {\n            date = 0;\n        } else if (controlid == 'map-control-end') {\n            date = maxDates;\n        } else if (controlid == 'map-control-back' && date > 0) {\n            date--;\n        } else if (controlid == 'map-control-forward' && date < maxDates) {\n            date++;\n        }\n        paused = true;\n        updateControls();\n    }\n\n    // Speed controls\n    window.clickSpeed = function() {\n        var speedid = event.srcElement.parentNode.id; \n        if (speedid == 'map-control-faster' && speed > 1) {\n            speed--;\n        } else if (speedid == 'map-control-slower' && speed < 20) {\n            speed++;\n        }\n    }\n\n    // HTML for controls\n    function initControls() {\n        // Avoid double loading\n        if (document.getElementById('map-controls') == null) {\n            // Init CSS\n            initControlsCSS();\n            // Control elements\n            var controlElements = { 'map-controls': { tag: 'div', append: 'svg-world-map-container' }, \n                                    'map-control-buttons': { tag: 'div', append: 'map-controls' }, \n                                    'map-control-start': { tag: 'button', append: 'map-control-buttons', icon: 'previous', click: 'clickControl()' }, \n                                    'map-control-back': { tag: 'button', append: 'map-control-buttons', icon: 'rewind', click: 'clickControl()' }, \n                                    'map-control-play-pause': { tag: 'button', append: 'map-control-buttons', icon: 'play', click: 'clickPlayPause()' }, \n                                    'map-control-forward': { tag: 'button', append: 'map-control-buttons', icon: 'fast-forward', click: 'clickControl()' }, \n                                    'map-control-end': { tag: 'button', append: 'map-control-buttons', icon: 'skip', click: 'clickControl()' }, \n                                    'map-slider-container': { tag: 'div', append: 'map-controls' }, \n                                    'map-slider': { tag: 'input', append: 'map-slider-container' }, \n                                    'map-speed-controls': { tag: 'div', append: 'map-controls' }, \n                                    'map-control-slower': { tag: 'button', append: 'map-speed-controls', icon: 'minus', click: 'clickSpeed()' }, \n                                    'map-control-faster': { tag: 'button', append: 'map-speed-controls', icon: 'plus', click: 'clickSpeed()' }, \n                                    'map-date': { tag: 'div', append: 'map-controls' } };\n            // Create all elements dynamically\n            for (var element in controlElements) {\n                window[element] = document.createElement(controlElements[element].tag);\n                window[element].setAttribute(\"id\", element);\n                window[controlElements[element].append].appendChild(window[element]);\n                if (controlElements[element].tag == 'button') {\n                    var i = document.createElement('i');\n                    i.setAttribute(\"class\", \"flaticon-\" + controlElements[element].icon);\n                    window[element].appendChild(i);\n                    window[element].setAttribute(\"onclick\", controlElements[element].click);\n                }\n            }\n            // Add missing attributes to slider\n            document.getElementById(\"map-slider\").setAttribute(\"type\", \"range\");\n            document.getElementById(\"map-slider\").setAttribute(\"min\", \"0\");\n            document.getElementById(\"map-slider\").setAttribute(\"max\", maxDates);\n            // Startup time control functions\n            initDayTimer();\n            initSilder();\n            initKeyControls();\n            updateControls();\n        }\n    }\n\n    // CSS for controls\n    function initControlsCSS() {\n        var style = document.createElement('style');\n        style.innerHTML = `\n            #map-controls { position: absolute; bottom: 0; left: 0; right: 0; width: auto; height: 40px; padding: 0 10px; background-color: rgba(0, 0, 0, .75); }\n            #map-control-buttons, #map-slider-container, #map-speed-controls, #map-date { float: left; }\n            #map-control-buttons { width: 20%; }\n            #map-slider-container { width: 60%; }\n            #map-speed-controls, #map-date { width: 10%; text-align: right; }\n            #map-date { margin-top: 10px; color: #FFFFFF; }\n            #map-controls button { cursor: pointer; opacity: .5; margin-top: 10px; color: #FFFFFF; background-color: transparent; border: none; } /* broder: manu; */\n            #map-controls button:hover { opacity: 1 !important; }\n            #map-controls button i::before { margin: 0; }\n            #map-speed-controls button i::before { font-size: 15px; font-weight: bold; }\n            #map-slider { -webkit-appearance: none; width: 98%; height: 5px; border-radius: 5px; background: #8A8A8A; -moz-user-select: none; user-select: none; outline: none; margin: 17px 13px 0; }\n            #map-slider:focus { outline: none; }\n            #map-slider::-webkit-slider-thumb { -webkit-appearance: none; appearance: none; width: 15px; height: 15px; border-radius: 50%; background: #FFFFFF; cursor: pointer; opacity: .5; }\n            #map-slider::-moz-range-thumb { width: 15px; height: 15px; border-radius: 50%; background: #FFFFFF; cursor: pointer; opacity: .5; -moz-user-select: none; user-select: none; }\n            #map-slider:hover::-webkit-slider-thumb, #map-slider:hover::-moz-range-thumb { opacity: 1; }\n            @media all and (max-width: 999px) { \n                #map-control-buttons { width: 25%; }\n                #map-slider-container { width: 50%; }\n                #map-speed-controls, #map-date { width: 12.5%; }\n                #map-controls button { margin-top: 12px; } \n                #map-controls button i::before { font-size: 15px; } \n                #map-speed-controls button i::before { font-size: 12px; } \n            }\n            @media all and (max-width: 666px) { \n                #map-speed-controls { display: none; }\n                #map-control-buttons, #map-date { position: absolute; bottom: 41px; height: 30px; padding-top: 10px; text-align: center; background-color: rgba(0, 0, 0, .75); }\n                #map-control-buttons { left: 0; width: 50%; }\n                #map-date { right: 0; width: calc(50% - 1px); }\n                #map-controls button { margin-top: 0px; } \n                #map-slider-container { width: 100%; }\n                #map-slider { width: 100%; margin: 17px 0 0; }\n            }\n        `;\n        document.head.appendChild(style);\n    }\n\n}\n"]},"metadata":{},"sourceType":"module"}