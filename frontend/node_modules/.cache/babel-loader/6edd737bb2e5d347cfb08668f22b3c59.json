{"ast":null,"code":"var _jsxFileName = \"/Users/shashwatkansal/Documents/Shashwat/Projects/conquer2/V0.2/conquer2/frontend/src/pages/Map/Map.jsx\";\nimport React, { Component, useState } from \"react\";\nimport { ComposableMap, Geographies, Geography, ZoomableGroup, Annotation, Marker, useZoomPan } from \"react-simple-maps\";\nimport ReactTooltip from \"react-tooltip\"; // import { useSpring, animated } from \"react-spring\";\n\nimport \"./Map.css\";\nimport { connect, loaddetails } from \"../api/index.js\";\nimport Intro2 from \"../shashgonenuts/intro2\";\nimport { username } from \"./Home/Home.jsx\";\nimport { geoCentroid } from \"d3-geo\";\nimport mapdata from \"../maps/world.txt\";\nconst geoUrl = \"https://raw.githubusercontent.com/zcreativelabs/react-simple-maps/master/topojson-maps/world-110m.json\";\nvar countriesLoaded = false;\nvar countries = {};\nvar socket = null;\nvar troops = 0;\nvar countryStates = {};\nvar playerColours = {};\nvar players = [];\n\nclass countryState {\n  constructor(Troops, Player) {\n    this.Troops = Troops;\n    this.Player = Player;\n  }\n\n}\n\nclass GameMap extends Component {\n  constructor() {\n    super();\n    socket = connect();\n\n    socket.onmessage = msg => {\n      var action = JSON.parse(msg.data);\n\n      switch (action.Type) {\n        case \"updateTroops\":\n          troops = action.Troops;\n          break;\n\n        case \"updateCountry\":\n          if (typeof countryStates[action.Country] == \"undefined\" || countryStates[action.Country].Player != action.Player) {\n            countryStates[action.Country] = new countryState(action.Troops, action.Player);\n          } else {\n            countryStates[action.Country].Troops += action.Troops;\n          }\n\n          break;\n\n        case \"newPlayer\":\n          console.log(action.Player + \" has entered the chat bois as: \" + action.Country);\n          playerColours[action.Player] = action.Country;\n          players.push(action.Player);\n      }\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(SideBar, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 12\n      }\n    });\n  }\n\n}\n\nfunction SideBar() {\n  //Fetch #troops, attack, move options, fix data vals\n  const [state, setState] = useState(\"\");\n  const [name, setname] = useState(\"\");\n  const [pop_est, setpop_est] = useState(\"\");\n  const [gdp, setgdp] = useState(\"\");\n  const [subrg, setsubrg] = useState(\"\");\n  const [continent, setcontinent] = useState(\"\");\n  const [display, setdisplay] = useState(false);\n  const [clickedCountry, setclickedCountry] = useState(\"\");\n\n  const handleclickedCountry = ISO_A2 => {\n    setclickedCountry(ISO_A2);\n  };\n\n  const handledoubleClicked = () => {\n    setclickedCountry(\"\");\n  };\n\n  const CountryDetails = () => {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 9\n      }\n    }, \"Spy Report On \", name, \":\"), /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }\n    }, countryStates[clickedCountry].Troops !== undefined && countryStates[clickedCountry].Troops), /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 9\n      }\n    }, \"Population: \", pop_est), /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 9\n      }\n    }, \"GDP (PPP): \", gdp), continent !== \"South America\" && /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 43\n      }\n    }, \"Subregion: \", subrg), /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }\n    }, \"Continent: \", continent), /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 9\n      }\n    }, \"Allegiance: Ohio\"));\n  };\n\n  const handleColourFill = country => {\n    if (!countriesLoaded) {\n      loadMap();\n      countriesLoaded = true;\n    }\n\n    const {\n      ISO_A2\n    } = country.properties;\n\n    if (clickedCountry !== \"\" && countries[clickedCountry] !== undefined && countries[clickedCountry].some(iso => iso === ISO_A2)) {\n      return \"#be90d4\";\n    }\n\n    try {\n      var col = playerColours[countryStates[ISO_A2].Player];\n\n      if (typeof col == \"undefined\") {\n        col = \"#B9A37E\";\n      }\n\n      return col;\n    } catch (TypeError) {\n      return \"#B9A37E\";\n    }\n  };\n\n  const options = () => {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 9\n      }\n    }, \"ATTACK\"), /*#__PURE__*/React.createElement(\"button\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 9\n      }\n    }, \"MOVE\"), /*#__PURE__*/React.createElement(\"button\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 9\n      }\n    }, \"DONATE\"), /*#__PURE__*/React.createElement(\"button\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 9\n      }\n    }, \"OPTION 4\"));\n  };\n\n  const playerBox = () => {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 9\n      }\n    }, \"PLAYERS:\"), /*#__PURE__*/React.createElement(\"ul\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 9\n      }\n    }, players.map(p => /*#__PURE__*/React.createElement(\"li\", {\n      key: p,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 13\n      }\n    }, \"p\"))));\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"playerBox\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"map-sidebar-wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"map-sidebar-info-wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 13\n    }\n  }, \"START THE CONQUEST!\"), /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 13\n    }\n  }, \"Welcome Commander \", username, \"!\"), /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 13\n    }\n  }, \"BASE TROOPS: \", troops)), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 11\n    }\n  }, \"This is your war control room. Help us attain victory over our enemies. The Gods are on our side!\"), clickedCountry !== \"\" && /*#__PURE__*/React.createElement(\"selectedCountryOptions\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 37\n    }\n  }), display && /*#__PURE__*/React.createElement(CountryDetails, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 23\n    }\n  }))), /*#__PURE__*/React.createElement(MapSettings, {\n    setTooltipContent: setState,\n    setname: setname,\n    setgdp: setgdp,\n    setpop_est: setpop_est,\n    setdisplay: setdisplay,\n    setcontinent: setcontinent,\n    setsubrg: setsubrg,\n    setclickedCountry: handleclickedCountry,\n    setdoubleClicked: handledoubleClicked,\n    handleColourFill: handleColourFill,\n    handleColourStroke: handleColourFill,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(ReactTooltip, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 7\n    }\n  }, state));\n}\n\nconst getnum = num => {\n  var num = Math.round(num);\n\n  if (num > Math.pow(10, 12)) {\n    num = num / Math.pow(10, 12) + \" Trillion\";\n  } else if (num > Math.pow(10, 9)) {\n    num = num / Math.pow(10, 9) + \" Billion\";\n  } else if (num > Math.pow(10, 6)) {\n    num = num / Math.pow(10, 6) + \" Million\";\n  }\n\n  return num;\n}; //Countries to not display\n\n\nfunction notThisCountry(country) {\n  const {\n    NAME\n  } = country.properties;\n  return NAME !== \"\";\n}\n\nvar clickedCountry; //TODO: player team colour for country\n\nfunction countryColors(country) {\n  const {\n    NAME,\n    ISO_A2\n  } = country.properties;\n  return \"#AAA\";\n}\n\nfunction loadMap() {\n  //TODO: take value from the cookie\n  fetch(\"/maps/world.txt\").then(raw => raw.text()).then(raw => raw.split(\"\\n\")).then(lines => lines.map(s => s.split(\" \"))).then(lines => lines.forEach(line => countries[line[0]] = line.slice(1)));\n} //FIXME: fix read file correctly\n\n\nfunction getCountryCodes(countrycode) {\n  // var fs = require(\"fs\");\n  const fileURL = \"/maps/world.txt\";\n  var textByLine = \"\";\n  fetch(fileURL).then(raw => raw.text()).then(raw => raw.split(\"\\n\")).then(raw => raw.map(x => x.split(\" \"))).then(raw => textByLine = raw);\n  var countriesBordering = [];\n\n  for (let j = 0; j < textByLine.length; j++) {\n    var borders = textByLine[j].split(\" \");\n\n    if (borders[0] == countrycode) {\n      for (let i = 1; i < borders.length; i++) {\n        //Get border codes\n        countriesBordering.push(borders[i]);\n      }\n    }\n  }\n\n  console.log(countriesBordering);\n  return countriesBordering;\n}\n/* GAME MAP */\n\n\nconst MapSettings = ({\n  setTooltipContent,\n  setname,\n  setpop_est,\n  setsubrg,\n  setcontinent,\n  setgdp,\n  setdisplay,\n  setclickedCountry,\n  handleColourFill,\n  handleColourStroke,\n  setdoubleClicked\n}) => {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"map-wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(ComposableMap, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(CustomZoomableGroup, {\n    center: [0, 0],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 279,\n      columnNumber: 9\n    }\n  }, position => /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Geographies, {\n    geography: geoUrl,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 282,\n      columnNumber: 15\n    }\n  }, ({\n    geographies\n  }) => /*#__PURE__*/React.createElement(React.Fragment, null, geographies.map(geo => {\n    const fillcolour = handleColourFill(geo);\n    const strokecolour = handleColourStroke(geo);\n    return notThisCountry(geo) ? /*#__PURE__*/React.createElement(Geography, {\n      key: geo.rsmKey,\n      geography: geo,\n      fill: fillcolour,\n      stroke: strokecolour,\n      onMouseEnter: () => {\n        const {\n          NAME,\n          POP_EST,\n          GDP_MD_EST,\n          SUBREGION,\n          CONTINENT\n        } = geo.properties; // setTooltipContent(\n        //   `${NAME} - $${getnum(GDP_MD_EST * Math.pow(10, 6))}`\n        // );\n\n        setTooltipContent(`${NAME} - ENEMY TERRITORY`);\n        setname(NAME);\n        setpop_est(getnum(POP_EST));\n        setgdp(getnum(GDP_MD_EST * Math.pow(10, 6)));\n        setsubrg(SUBREGION);\n        setcontinent(CONTINENT);\n        setdisplay(true);\n      },\n      onMouseLeave: () => {\n        setTooltipContent(\"\");\n        setdisplay(false);\n      },\n      style: {\n        default: {\n          fill: \"#D6D6DA\",\n          outline: \"none\"\n        },\n        hover: {\n          fill: \"#F53\",\n          outline: \"none\"\n        },\n        pressed: {\n          fill: \"#D6D6DA\",\n          outline: \"none\"\n        }\n      },\n      onClick: () => {\n        const {\n          ISO_A2\n        } = geo.properties;\n        setclickedCountry(ISO_A2);\n      },\n      onDoubleClick: () => {\n        setdoubleClicked();\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 289,\n        columnNumber: 25\n      }\n    }) : null;\n  }), geographies.map(geo => {\n    const centroid = geoCentroid(geo);\n    const {\n      ISO_A2\n    } = geo.properties;\n    return /*#__PURE__*/React.createElement(\"g\", {\n      key: geo.rsmKey,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 348,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Marker, {\n      coordinates: centroid,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 350,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"text\", {\n      fontSize: 7 / position.k,\n      alignmentBaseline: \"middle\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 351,\n        columnNumber: 31\n      }\n    }, countries[ISO_A2])));\n  })))))));\n};\n\nconst CustomZoomableGroup = ({\n  children,\n  ...restProps\n}) => {\n  const {\n    mapRef,\n    transformString,\n    position\n  } = useZoomPan(restProps);\n  return (\n    /*#__PURE__*/\n    // <div className=\"zoomable-group\">\n    React.createElement(\"g\", {\n      ref: mapRef,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 377,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"rect\", {\n      fill: \"transparent\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 378,\n        columnNumber: 7\n      }\n    }), /*#__PURE__*/React.createElement(\"g\", {\n      transform: transformString,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 379,\n        columnNumber: 7\n      }\n    }, children(position))) // </div>\n\n  );\n};\n\nexport default GameMap;","map":{"version":3,"sources":["/Users/shashwatkansal/Documents/Shashwat/Projects/conquer2/V0.2/conquer2/frontend/src/pages/Map/Map.jsx"],"names":["React","Component","useState","ComposableMap","Geographies","Geography","ZoomableGroup","Annotation","Marker","useZoomPan","ReactTooltip","connect","loaddetails","Intro2","username","geoCentroid","mapdata","geoUrl","countriesLoaded","countries","socket","troops","countryStates","playerColours","players","countryState","constructor","Troops","Player","GameMap","onmessage","msg","action","JSON","parse","data","Type","Country","console","log","push","render","SideBar","state","setState","name","setname","pop_est","setpop_est","gdp","setgdp","subrg","setsubrg","continent","setcontinent","display","setdisplay","clickedCountry","setclickedCountry","handleclickedCountry","ISO_A2","handledoubleClicked","CountryDetails","undefined","handleColourFill","country","loadMap","properties","some","iso","col","TypeError","options","playerBox","map","p","getnum","num","Math","round","pow","notThisCountry","NAME","countryColors","fetch","then","raw","text","split","lines","s","forEach","line","slice","getCountryCodes","countrycode","fileURL","textByLine","x","countriesBordering","j","length","borders","i","MapSettings","setTooltipContent","handleColourStroke","setdoubleClicked","position","geographies","geo","fillcolour","strokecolour","rsmKey","POP_EST","GDP_MD_EST","SUBREGION","CONTINENT","default","fill","outline","hover","pressed","centroid","k","CustomZoomableGroup","children","restProps","mapRef","transformString"],"mappings":"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","sourcesContent":["import React, { Component, useState } from \"react\";\nimport {\n  ComposableMap,\n  Geographies,\n  Geography,\n  ZoomableGroup,\n  Annotation,\n  Marker,\n  useZoomPan,\n} from \"react-simple-maps\";\nimport ReactTooltip from \"react-tooltip\";\n// import { useSpring, animated } from \"react-spring\";\nimport \"./Map.css\";\nimport { connect, loaddetails } from \"../api/index.js\";\nimport Intro2 from \"../shashgonenuts/intro2\";\nimport { username } from \"./Home/Home.jsx\";\nimport { geoCentroid } from \"d3-geo\";\n\nimport mapdata from \"../maps/world.txt\";\n\nconst geoUrl =\n  \"https://raw.githubusercontent.com/zcreativelabs/react-simple-maps/master/topojson-maps/world-110m.json\";\n\nvar countriesLoaded = false;\nvar countries = {};\nvar socket = null;\nvar troops = 0;\nvar countryStates = {};\nvar playerColours = {};\nvar players = [];\n\nclass countryState {\n  constructor(Troops, Player) {\n    this.Troops = Troops;\n    this.Player = Player;\n  }\n}\n\nclass GameMap extends Component {\n  constructor() {\n    super();\n    socket = connect();\n    socket.onmessage = (msg) => {\n      var action = JSON.parse(msg.data);\n      switch (action.Type) {\n        case \"updateTroops\":\n          troops = action.Troops;\n          break;\n        case \"updateCountry\":\n          if (\n            typeof countryStates[action.Country] == \"undefined\" ||\n            countryStates[action.Country].Player != action.Player\n          ) {\n            countryStates[action.Country] = new countryState(\n              action.Troops,\n              action.Player\n            );\n          } else {\n            countryStates[action.Country].Troops += action.Troops;\n          }\n          break;\n        case \"newPlayer\":\n          console.log(\n            action.Player + \" has entered the chat bois as: \" + action.Country\n          );\n          playerColours[action.Player] = action.Country;\n          players.push(action.Player);\n      }\n    };\n  }\n\n  render() {\n    return <SideBar />;\n  }\n}\n\nfunction SideBar() {\n  //Fetch #troops, attack, move options, fix data vals\n  const [state, setState] = useState(\"\");\n\n  const [name, setname] = useState(\"\");\n  const [pop_est, setpop_est] = useState(\"\");\n  const [gdp, setgdp] = useState(\"\");\n  const [subrg, setsubrg] = useState(\"\");\n  const [continent, setcontinent] = useState(\"\");\n  const [display, setdisplay] = useState(false);\n  const [clickedCountry, setclickedCountry] = useState(\"\");\n\n  const handleclickedCountry = (ISO_A2) => {\n    setclickedCountry(ISO_A2);\n  };\n\n  const handledoubleClicked = () => {\n    setclickedCountry(\"\");\n  };\n\n  const CountryDetails = () => {\n    return (\n      <div>\n        <h2>Spy Report On {name}:</h2>\n        <h3>\n          {countryStates[clickedCountry].Troops !== undefined &&\n            countryStates[clickedCountry].Troops}\n        </h3>\n        <h3>Population: {pop_est}</h3>\n        <h3>GDP (PPP): {gdp}</h3>\n        {continent !== \"South America\" && <h3>Subregion: {subrg}</h3>}\n        <h3>Continent: {continent}</h3>\n        <h3>Allegiance: Ohio</h3>\n      </div>\n    );\n  };\n\n  const handleColourFill = (country) => {\n    if (!countriesLoaded) {\n      loadMap();\n      countriesLoaded = true;\n    }\n    const { ISO_A2 } = country.properties;\n\n    if (\n      clickedCountry !== \"\" &&\n      countries[clickedCountry] !== undefined &&\n      countries[clickedCountry].some((iso) => iso === ISO_A2)\n    ) {\n      return \"#be90d4\";\n    }\n    try {\n      var col = playerColours[countryStates[ISO_A2].Player];\n      if (typeof col == \"undefined\") {\n        col = \"#B9A37E\";\n      }\n      return col;\n    } catch (TypeError) {\n      return \"#B9A37E\";\n    }\n  };\n\n  const options = () => {\n    return (\n      <div>\n        <button>ATTACK</button>\n        <button>MOVE</button>\n        <button>DONATE</button>\n        <button>OPTION 4</button>\n      </div>\n    );\n  };\n\n  const playerBox = () => {\n    return (\n      <div>\n        <h2>PLAYERS:</h2>\n        <ul>\n          {players.map((p) => (\n            <li key={p}>p</li>\n          ))}\n        </ul>\n      </div>\n    );\n  };\n\n  return (\n    <div>\n      <playerBox />\n      <div className=\"map-sidebar-wrapper\">\n        <div className=\"map-sidebar-info-wrapper\">\n          <div>\n            <h1>START THE CONQUEST!</h1>\n            <h2>Welcome Commander {username}!</h2>\n            <h3>BASE TROOPS: {troops}</h3>\n          </div>\n          <p>\n            This is your war control room. Help us attain victory over our\n            enemies. The Gods are on our side!\n          </p>\n          {clickedCountry !== \"\" && <selectedCountryOptions />}\n          {display && <CountryDetails />}\n        </div>\n      </div>\n      <MapSettings\n        setTooltipContent={setState}\n        setname={setname}\n        setgdp={setgdp}\n        setpop_est={setpop_est}\n        setdisplay={setdisplay}\n        setcontinent={setcontinent}\n        setsubrg={setsubrg}\n        setclickedCountry={handleclickedCountry}\n        setdoubleClicked={handledoubleClicked}\n        handleColourFill={handleColourFill}\n        handleColourStroke={handleColourFill}\n      />\n      <ReactTooltip>{state}</ReactTooltip>\n    </div>\n  );\n}\n\nconst getnum = (num) => {\n  var num = Math.round(num);\n  if (num > Math.pow(10, 12)) {\n    num = num / Math.pow(10, 12) + \" Trillion\";\n  } else if (num > Math.pow(10, 9)) {\n    num = num / Math.pow(10, 9) + \" Billion\";\n  } else if (num > Math.pow(10, 6)) {\n    num = num / Math.pow(10, 6) + \" Million\";\n  }\n  return num;\n};\n\n//Countries to not display\nfunction notThisCountry(country) {\n  const { NAME } = country.properties;\n  return NAME !== \"\";\n}\n\nvar clickedCountry;\n//TODO: player team colour for country\nfunction countryColors(country) {\n  const { NAME, ISO_A2 } = country.properties;\n  return \"#AAA\";\n}\n\nfunction loadMap() {\n  //TODO: take value from the cookie\n  fetch(\"/maps/world.txt\")\n    .then((raw) => raw.text())\n    .then((raw) => raw.split(\"\\n\"))\n    .then((lines) => lines.map((s) => s.split(\" \")))\n    .then((lines) =>\n      lines.forEach((line) => (countries[line[0]] = line.slice(1)))\n    );\n}\n\n//FIXME: fix read file correctly\nfunction getCountryCodes(countrycode) {\n  // var fs = require(\"fs\");\n  const fileURL = \"/maps/world.txt\";\n  var textByLine = \"\";\n  fetch(fileURL)\n    .then((raw) => raw.text())\n    .then((raw) => raw.split(\"\\n\"))\n    .then((raw) => raw.map((x) => x.split(\" \")))\n    .then((raw) => (textByLine = raw));\n\n  var countriesBordering = [];\n\n  for (let j = 0; j < textByLine.length; j++) {\n    var borders = textByLine[j].split(\" \");\n    if (borders[0] == countrycode) {\n      for (let i = 1; i < borders.length; i++) {\n        //Get border codes\n        countriesBordering.push(borders[i]);\n      }\n    }\n  }\n  console.log(countriesBordering);\n  return countriesBordering;\n}\n\n/* GAME MAP */\n\nconst MapSettings = ({\n  setTooltipContent,\n  setname,\n  setpop_est,\n  setsubrg,\n  setcontinent,\n  setgdp,\n  setdisplay,\n  setclickedCountry,\n  handleColourFill,\n  handleColourStroke,\n  setdoubleClicked,\n}) => {\n  return (\n    <div className=\"map-wrapper\">\n      <ComposableMap>\n        <CustomZoomableGroup center={[0, 0]}>\n          {(position) => (\n            <>\n              <Geographies geography={geoUrl}>\n                {({ geographies }) => (\n                  <>\n                    {geographies.map((geo) => {\n                      const fillcolour = handleColourFill(geo);\n                      const strokecolour = handleColourStroke(geo);\n                      return notThisCountry(geo) ? (\n                        <Geography\n                          key={geo.rsmKey}\n                          geography={geo}\n                          fill={fillcolour}\n                          stroke={strokecolour}\n                          onMouseEnter={() => {\n                            const {\n                              NAME,\n                              POP_EST,\n                              GDP_MD_EST,\n                              SUBREGION,\n                              CONTINENT,\n                            } = geo.properties;\n\n                            // setTooltipContent(\n                            //   `${NAME} - $${getnum(GDP_MD_EST * Math.pow(10, 6))}`\n                            // );\n\n                            setTooltipContent(`${NAME} - ENEMY TERRITORY`);\n                            setname(NAME);\n                            setpop_est(getnum(POP_EST));\n                            setgdp(getnum(GDP_MD_EST * Math.pow(10, 6)));\n                            setsubrg(SUBREGION);\n                            setcontinent(CONTINENT);\n                            setdisplay(true);\n                          }}\n                          onMouseLeave={() => {\n                            setTooltipContent(\"\");\n                            setdisplay(false);\n                          }}\n                          style={{\n                            default: {\n                              fill: \"#D6D6DA\",\n                              outline: \"none\",\n                            },\n                            hover: {\n                              fill: \"#F53\",\n                              outline: \"none\",\n                            },\n                            pressed: {\n                              fill: \"#D6D6DA\",\n                              outline: \"none\",\n                            },\n                          }}\n                          onClick={() => {\n                            const { ISO_A2 } = geo.properties;\n                            setclickedCountry(ISO_A2);\n                          }}\n                          onDoubleClick={() => {\n                            setdoubleClicked();\n                          }}\n                        />\n                      ) : null;\n                    })}\n\n                    {geographies.map((geo) => {\n                      const centroid = geoCentroid(geo);\n                      const { ISO_A2 } = geo.properties;\n                      return (\n                        <g key={geo.rsmKey}>\n                          {\n                            <Marker coordinates={centroid}>\n                              <text\n                                fontSize={7 / position.k}\n                                alignmentBaseline=\"middle\"\n                              >\n                                {countries[ISO_A2]}\n                              </text>\n                            </Marker>\n                          }\n                        </g>\n                      );\n                    })}\n                  </>\n                )}\n              </Geographies>\n            </>\n          )}\n        </CustomZoomableGroup>\n      </ComposableMap>\n    </div>\n  );\n};\n\nconst CustomZoomableGroup = ({ children, ...restProps }) => {\n  const { mapRef, transformString, position } = useZoomPan(restProps);\n  return (\n    // <div className=\"zoomable-group\">\n    <g ref={mapRef}>\n      <rect fill=\"transparent\" />\n      <g transform={transformString}>{children(position)}</g>\n    </g>\n    // </div>\n  );\n};\n\nexport default GameMap;\n"]},"metadata":{},"sourceType":"module"}